(function(){"use strict";var toString={}.toString;var _cof=function(it){return toString.call(it).slice(8,-1)};function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var _global=createCommonjsModule(function(module){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global});var SHARED="__core-js_shared__";var store=_global[SHARED]||(_global[SHARED]={});var _shared=function(key){return store[key]||(store[key]={})};var id=0;var px=Math.random();var _uid=function(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))};var _wks=createCommonjsModule(function(module){var store=_shared("wks");var Symbol=_global.Symbol;var USE_SYMBOL=typeof Symbol=="function";var $exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:_uid)("Symbol."+name))};$exports.store=store});var TAG=_wks("toStringTag");var ARG=_cof(function(){return arguments}())=="Arguments";var tryGet=function(it,key){try{return it[key]}catch(e){}};var _classof=function(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=tryGet(O=Object(it),TAG))=="string"?T:ARG?_cof(O):(B=_cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B};var _isObject=function(it){return typeof it==="object"?it!==null:typeof it==="function"};var _anObject=function(it){if(!_isObject(it))throw TypeError(it+" is not an object!");return it};var _fails=function(exec){try{return!!exec()}catch(e){return true}};var _descriptors=!_fails(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7});var document$1=_global.document;var is=_isObject(document$1)&&_isObject(document$1.createElement);var _domCreate=function(it){return is?document$1.createElement(it):{}};var _ie8DomDefine=!_descriptors&&!_fails(function(){return Object.defineProperty(_domCreate("div"),"a",{get:function(){return 7}}).a!=7});var _toPrimitive=function(it,S){if(!_isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=="function"&&!_isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=="function"&&!_isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=="function"&&!_isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")};var dP=Object.defineProperty;var f=_descriptors?Object.defineProperty:function defineProperty(O,P,Attributes){_anObject(O);P=_toPrimitive(P,true);_anObject(Attributes);if(_ie8DomDefine)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");if("value"in Attributes)O[P]=Attributes.value;return O};var _objectDp={f:f};var _propertyDesc=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}};var _hide=_descriptors?function(object,key,value){return _objectDp.f(object,key,_propertyDesc(1,value))}:function(object,key,value){object[key]=value;return object};var hasOwnProperty={}.hasOwnProperty;var _has=function(it,key){return hasOwnProperty.call(it,key)};var _core=createCommonjsModule(function(module){var core=module.exports={version:"2.5.1"};if(typeof __e=="number")__e=core});var _redefine=createCommonjsModule(function(module){var SRC=_uid("src");var TO_STRING="toString";var $toString=Function[TO_STRING];var TPL=(""+$toString).split(TO_STRING);_core.inspectSource=function(it){return $toString.call(it)};(module.exports=function(O,key,val,safe){var isFunction=typeof val=="function";if(isFunction)_has(val,"name")||_hide(val,"name",key);if(O[key]===val)return;if(isFunction)_has(val,SRC)||_hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)));if(O===_global){O[key]=val}else if(!safe){delete O[key];_hide(O,key,val)}else if(O[key]){O[key]=val}else{_hide(O,key,val)}})(Function.prototype,TO_STRING,function toString(){return typeof this=="function"&&this[SRC]||$toString.call(this)})});"use strict";var test={};test[_wks("toStringTag")]="z";if(test+""!="[object z]"){_redefine(Object.prototype,"toString",function toString(){return"[object "+_classof(this)+"]"},true)}var ceil=Math.ceil;var floor=Math.floor;var _toInteger=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)};var _defined=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it};var _stringAt=function(TO_STRING){return function(that,pos){var s=String(_defined(that));var i=_toInteger(pos);var l=s.length;var a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}};var _library=false;var _aFunction=function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it};var _ctx=function(fn,that,length){_aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}};var PROTOTYPE="prototype";var $export=function(type,name,source){var IS_FORCED=type&$export.F;var IS_GLOBAL=type&$export.G;var IS_STATIC=type&$export.S;var IS_PROTO=type&$export.P;var IS_BIND=type&$export.B;var target=IS_GLOBAL?_global:IS_STATIC?_global[name]||(_global[name]={}):(_global[name]||{})[PROTOTYPE];var exports=IS_GLOBAL?_core:_core[name]||(_core[name]={});var expProto=exports[PROTOTYPE]||(exports[PROTOTYPE]={});var key,own,out,exp;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&target[key]!==undefined;out=(own?target:source)[key];exp=IS_BIND&&own?_ctx(out,_global):IS_PROTO&&typeof out=="function"?_ctx(Function.call,out):out;if(target)_redefine(target,key,out,type&$export.U);if(exports[key]!=out)_hide(exports,key,exp);if(IS_PROTO&&expProto[key]!=out)expProto[key]=out}};_global.core=_core;$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;$export.U=64;$export.R=128;var _export=$export;var _iterators={};var _iobject=Object("z").propertyIsEnumerable(0)?Object:function(it){return _cof(it)=="String"?it.split(""):Object(it)};var _toIobject=function(it){return _iobject(_defined(it))};var min=Math.min;var _toLength=function(it){return it>0?min(_toInteger(it),9007199254740991):0};var max=Math.max;var min$1=Math.min;var _toAbsoluteIndex=function(index,length){index=_toInteger(index);return index<0?max(index+length,0):min$1(index,length)};var _arrayIncludes=function(IS_INCLUDES){return function($this,el,fromIndex){var O=_toIobject($this);var length=_toLength(O.length);var index=_toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0}return!IS_INCLUDES&&-1}};var shared=_shared("keys");var _sharedKey=function(key){return shared[key]||(shared[key]=_uid(key))};var arrayIndexOf=_arrayIncludes(false);var IE_PROTO$1=_sharedKey("IE_PROTO");var _objectKeysInternal=function(object,names){var O=_toIobject(object);var i=0;var result=[];var key;for(key in O)if(key!=IE_PROTO$1)_has(O,key)&&result.push(key);while(names.length>i)if(_has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}return result};var _enumBugKeys="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");var _objectKeys=Object.keys||function keys(O){return _objectKeysInternal(O,_enumBugKeys)};var _objectDps=_descriptors?Object.defineProperties:function defineProperties(O,Properties){_anObject(O);var keys=_objectKeys(Properties);var length=keys.length;var i=0;var P;while(length>i)_objectDp.f(O,P=keys[i++],Properties[P]);return O};var document$2=_global.document;var _html=document$2&&document$2.documentElement;var IE_PROTO=_sharedKey("IE_PROTO");var Empty=function(){};var PROTOTYPE$1="prototype";var createDict=function(){var iframe=_domCreate("iframe");var i=_enumBugKeys.length;var lt="<";var gt=">";var iframeDocument;iframe.style.display="none";_html.appendChild(iframe);iframe.src="javascript:";iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt);iframeDocument.close();createDict=iframeDocument.F;while(i--)delete createDict[PROTOTYPE$1][_enumBugKeys[i]];return createDict()};var _objectCreate=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE$1]=_anObject(O);result=new Empty;Empty[PROTOTYPE$1]=null;result[IE_PROTO]=O}else result=createDict();return Properties===undefined?result:_objectDps(result,Properties)};var def=_objectDp.f;var TAG$1=_wks("toStringTag");var _setToStringTag=function(it,tag,stat){if(it&&!_has(it=stat?it:it.prototype,TAG$1))def(it,TAG$1,{configurable:true,value:tag})};"use strict";var IteratorPrototype={};_hide(IteratorPrototype,_wks("iterator"),function(){return this});var _iterCreate=function(Constructor,NAME,next){Constructor.prototype=_objectCreate(IteratorPrototype,{next:_propertyDesc(1,next)});_setToStringTag(Constructor,NAME+" Iterator")};var _toObject=function(it){return Object(_defined(it))};var IE_PROTO$2=_sharedKey("IE_PROTO");var ObjectProto=Object.prototype;var _objectGpo=Object.getPrototypeOf||function(O){O=_toObject(O);if(_has(O,IE_PROTO$2))return O[IE_PROTO$2];if(typeof O.constructor=="function"&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectProto:null};"use strict";var ITERATOR=_wks("iterator");var BUGGY=!([].keys&&"next"in[].keys());var FF_ITERATOR="@@iterator";var KEYS="keys";var VALUES="values";var returnThis=function(){return this};var _iterDefine=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){_iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator";var DEF_VALUES=DEFAULT==VALUES;var VALUES_BUG=false;var proto=Base.prototype;var $native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT];var $default=$native||getMethod(DEFAULT);var $entries=DEFAULT?!DEF_VALUES?$default:getMethod("entries"):undefined;var $anyNative=NAME=="Array"?proto.entries||$native:$native;var methods,key,IteratorPrototype;if($anyNative){IteratorPrototype=_objectGpo($anyNative.call(new Base));if(IteratorPrototype!==Object.prototype&&IteratorPrototype.next){_setToStringTag(IteratorPrototype,TAG,true);if(!_library&&!_has(IteratorPrototype,ITERATOR))_hide(IteratorPrototype,ITERATOR,returnThis)}}if(DEF_VALUES&&$native&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}if((!_library||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){_hide(proto,ITERATOR,$default)}_iterators[NAME]=$default;_iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries};if(FORCED)for(key in methods){if(!(key in proto))_redefine(proto,key,methods[key])}else _export(_export.P+_export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods};"use strict";var $at=_stringAt(true);_iterDefine(String,"String",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t;var index=this._i;var point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}});var UNSCOPABLES=_wks("unscopables");var ArrayProto=Array.prototype;if(ArrayProto[UNSCOPABLES]==undefined)_hide(ArrayProto,UNSCOPABLES,{});var _addToUnscopables=function(key){ArrayProto[UNSCOPABLES][key]=true};var _iterStep=function(done,value){return{value:value,done:!!done}};"use strict";var es6_array_iterator=_iterDefine(Array,"Array",function(iterated,kind){this._t=_toIobject(iterated);this._i=0;this._k=kind},function(){var O=this._t;var kind=this._k;var index=this._i++;if(!O||index>=O.length){this._t=undefined;return _iterStep(1)}if(kind=="keys")return _iterStep(0,index);if(kind=="values")return _iterStep(0,O[index]);return _iterStep(0,[index,O[index]])},"values");_iterators.Arguments=_iterators.Array;_addToUnscopables("keys");_addToUnscopables("values");_addToUnscopables("entries");var ITERATOR$1=_wks("iterator");var TO_STRING_TAG=_wks("toStringTag");var ArrayValues=_iterators.Array;var DOMIterables={CSSRuleList:true,CSSStyleDeclaration:false,CSSValueList:false,ClientRectList:false,DOMRectList:false,DOMStringList:false,DOMTokenList:true,DataTransferItemList:false,FileList:false,HTMLAllCollection:false,HTMLCollection:false,HTMLFormElement:false,HTMLSelectElement:false,MediaList:true,MimeTypeArray:false,NamedNodeMap:false,NodeList:true,PaintRequestList:false,Plugin:false,PluginArray:false,SVGLengthList:false,SVGNumberList:false,SVGPathSegList:false,SVGPointList:false,SVGStringList:false,SVGTransformList:false,SourceBufferList:false,StyleSheetList:true,TextTrackCueList:false,TextTrackList:false,TouchList:false};for(var collections=_objectKeys(DOMIterables),i=0;i<collections.length;i++){var NAME=collections[i];var explicit=DOMIterables[NAME];var Collection=_global[NAME];var proto=Collection&&Collection.prototype;var key;if(proto){if(!proto[ITERATOR$1])_hide(proto,ITERATOR$1,ArrayValues);if(!proto[TO_STRING_TAG])_hide(proto,TO_STRING_TAG,NAME);_iterators[NAME]=ArrayValues;if(explicit)for(key in es6_array_iterator)if(!proto[key])_redefine(proto,key,es6_array_iterator[key],true)}}var _anInstance=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||forbiddenField!==undefined&&forbiddenField in it){throw TypeError(name+": incorrect invocation!")}return it};var _iterCall=function(iterator,fn,value,entries){try{return entries?fn(_anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)_anObject(ret.call(iterator));throw e}};var ITERATOR$2=_wks("iterator");var ArrayProto$1=Array.prototype;var _isArrayIter=function(it){return it!==undefined&&(_iterators.Array===it||ArrayProto$1[ITERATOR$2]===it)};var ITERATOR$3=_wks("iterator");var core_getIteratorMethod=_core.getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR$3]||it["@@iterator"]||_iterators[_classof(it)]};var _forOf=createCommonjsModule(function(module){var BREAK={};var RETURN={};var exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var iterFn=ITERATOR?function(){return iterable}:core_getIteratorMethod(iterable);var f=_ctx(fn,that,entries?2:1);var index=0;var length,step,iterator,result;if(typeof iterFn!="function")throw TypeError(iterable+" is not iterable!");if(_isArrayIter(iterFn))for(length=_toLength(iterable.length);length>index;index++){result=entries?f(_anObject(step=iterable[index])[0],step[1]):f(iterable[index]);if(result===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){result=_iterCall(iterator,f,step.value,entries);if(result===BREAK||result===RETURN)return result}};exports.BREAK=BREAK;exports.RETURN=RETURN});var SPECIES=_wks("species");var _speciesConstructor=function(O,D){var C=_anObject(O).constructor;var S;return C===undefined||(S=_anObject(C)[SPECIES])==undefined?D:_aFunction(S)};var _invoke=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)};var process$1=_global.process;var setTask=_global.setImmediate;var clearTask=_global.clearImmediate;var MessageChannel=_global.MessageChannel;var Dispatch=_global.Dispatch;var counter=0;var queue={};var ONREADYSTATECHANGE="onreadystatechange";var defer;var channel;var port;var run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn()}};var listener=function(event){run.call(event.data)};if(!setTask||!clearTask){setTask=function setImmediate(fn){var args=[];var i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){_invoke(typeof fn=="function"?fn:Function(fn),args)};defer(counter);return counter};clearTask=function clearImmediate(id){delete queue[id]};if(_cof(process$1)=="process"){defer=function(id){process$1.nextTick(_ctx(run,id,1))}}else if(Dispatch&&Dispatch.now){defer=function(id){Dispatch.now(_ctx(run,id,1))}}else if(MessageChannel){channel=new MessageChannel;port=channel.port2;channel.port1.onmessage=listener;defer=_ctx(port.postMessage,port,1)}else if(_global.addEventListener&&typeof postMessage=="function"&&!_global.importScripts){defer=function(id){_global.postMessage(id+"","*")};_global.addEventListener("message",listener,false)}else if(ONREADYSTATECHANGE in _domCreate("script")){defer=function(id){_html.appendChild(_domCreate("script"))[ONREADYSTATECHANGE]=function(){_html.removeChild(this);run.call(id)}}}else{defer=function(id){setTimeout(_ctx(run,id,1),0)}}}var _task={set:setTask,clear:clearTask};var macrotask=_task.set;var Observer=_global.MutationObserver||_global.WebKitMutationObserver;var process$2=_global.process;var Promise$1=_global.Promise;var isNode$1=_cof(process$2)=="process";var _microtask=function(){var head,last,notify;var flush=function(){var parent,fn;if(isNode$1&&(parent=process$2.domain))parent.exit();while(head){fn=head.fn;head=head.next;try{fn()}catch(e){if(head)notify();else last=undefined;throw e}}last=undefined;if(parent)parent.enter()};if(isNode$1){notify=function(){process$2.nextTick(flush)}}else if(Observer){var toggle=true;var node=document.createTextNode("");new Observer(flush).observe(node,{characterData:true});notify=function(){node.data=toggle=!toggle}}else if(Promise$1&&Promise$1.resolve){var promise=Promise$1.resolve();notify=function(){promise.then(flush)}}else{notify=function(){macrotask.call(_global,flush)}}return function(fn){var task={fn:fn,next:undefined};if(last)last.next=task;if(!head){head=task;notify()}last=task}};"use strict";function PromiseCapability(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError("Bad Promise constructor");resolve=$$resolve;reject=$$reject});this.resolve=_aFunction(resolve);this.reject=_aFunction(reject)}var f$1=function(C){return new PromiseCapability(C)};var _newPromiseCapability={f:f$1};var _perform=function(exec){try{return{e:false,v:exec()}}catch(e){return{e:true,v:e}}};var _promiseResolve=function(C,x){_anObject(C);if(_isObject(x)&&x.constructor===C)return x;var promiseCapability=_newPromiseCapability.f(C);var resolve=promiseCapability.resolve;resolve(x);return promiseCapability.promise};var _redefineAll=function(target,src,safe){for(var key in src)_redefine(target,key,src[key],safe);return target};"use strict";var SPECIES$1=_wks("species");var _setSpecies=function(KEY){var C=_global[KEY];if(_descriptors&&C&&!C[SPECIES$1])_objectDp.f(C,SPECIES$1,{configurable:true,get:function(){return this}})};var ITERATOR$4=_wks("iterator");var SAFE_CLOSING=false;try{var riter=[7][ITERATOR$4]();riter["return"]=function(){SAFE_CLOSING=true}}catch(e){}var _iterDetect=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7];var iter=arr[ITERATOR$4]();iter.next=function(){return{done:safe=true}};arr[ITERATOR$4]=function(){return iter};exec(arr)}catch(e){}return safe};"use strict";var task=_task.set;var microtask=_microtask();var PROMISE="Promise";var TypeError$1=_global.TypeError;var process=_global.process;var $Promise=_global[PROMISE];var isNode=_classof(process)=="process";var empty=function(){};var Internal;var newGenericPromiseCapability;var OwnPromiseCapability;var Wrapper;var newPromiseCapability=newGenericPromiseCapability=_newPromiseCapability.f;var USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1);var FakePromise=(promise.constructor={})[_wks("species")]=function(exec){exec(empty,empty)};return(isNode||typeof PromiseRejectionEvent=="function")&&promise.then(empty)instanceof FakePromise}catch(e){}}();var isThenable=function(it){var then;return _isObject(it)&&typeof(then=it.then)=="function"?then:false};var notify=function(promise,isReject){if(promise._n)return;promise._n=true;var chain=promise._c;microtask(function(){var value=promise._v;var ok=promise._s==1;var i=0;var run=function(reaction){var handler=ok?reaction.ok:reaction.fail;var resolve=reaction.resolve;var reject=reaction.reject;var domain=reaction.domain;var result,then;try{if(handler){if(!ok){if(promise._h==2)onHandleUnhandled(promise);promise._h=1}if(handler===true)result=value;else{if(domain)domain.enter();result=handler(value);if(domain)domain.exit()}if(result===reaction.promise){reject(TypeError$1("Promise-chain cycle"))}else if(then=isThenable(result)){then.call(result,resolve,reject)}else resolve(result)}else reject(value)}catch(e){reject(e)}};while(chain.length>i)run(chain[i++]);promise._c=[];promise._n=false;if(isReject&&!promise._h)onUnhandled(promise)})};var onUnhandled=function(promise){task.call(_global,function(){var value=promise._v;var unhandled=isUnhandled(promise);var result,handler,console;if(unhandled){result=_perform(function(){if(isNode){process.emit("unhandledRejection",value,promise)}else if(handler=_global.onunhandledrejection){handler({promise:promise,reason:value})}else if((console=_global.console)&&console.error){console.error("Unhandled promise rejection",value)}});promise._h=isNode||isUnhandled(promise)?2:1}promise._a=undefined;if(unhandled&&result.e)throw result.v})};var isUnhandled=function(promise){if(promise._h==1)return false;var chain=promise._a||promise._c;var i=0;var reaction;while(chain.length>i){reaction=chain[i++];if(reaction.fail||!isUnhandled(reaction.promise))return false}return true};var onHandleUnhandled=function(promise){task.call(_global,function(){var handler;if(isNode){process.emit("rejectionHandled",promise)}else if(handler=_global.onrejectionhandled){handler({promise:promise,reason:promise._v})}})};var $reject=function(value){var promise=this;if(promise._d)return;promise._d=true;promise=promise._w||promise;promise._v=value;promise._s=2;if(!promise._a)promise._a=promise._c.slice();notify(promise,true)};var $resolve=function(value){var promise=this;var then;if(promise._d)return;promise._d=true;promise=promise._w||promise;try{if(promise===value)throw TypeError$1("Promise can't be resolved itself");if(then=isThenable(value)){microtask(function(){var wrapper={_w:promise,_d:false};try{then.call(value,_ctx($resolve,wrapper,1),_ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}})}else{promise._v=value;promise._s=1;notify(promise,false)}}catch(e){$reject.call({_w:promise,_d:false},e)}};if(!USE_NATIVE){$Promise=function Promise(executor){_anInstance(this,$Promise,PROMISE,"_h");_aFunction(executor);Internal.call(this);try{executor(_ctx($resolve,this,1),_ctx($reject,this,1))}catch(err){$reject.call(this,err)}};Internal=function Promise(executor){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};Internal.prototype=_redefineAll($Promise.prototype,{then:function then(onFulfilled,onRejected){var reaction=newPromiseCapability(_speciesConstructor(this,$Promise));reaction.ok=typeof onFulfilled=="function"?onFulfilled:true;reaction.fail=typeof onRejected=="function"&&onRejected;reaction.domain=isNode?process.domain:undefined;this._c.push(reaction);if(this._a)this._a.push(reaction);if(this._s)notify(this,false);return reaction.promise},catch:function(onRejected){return this.then(undefined,onRejected)}});OwnPromiseCapability=function(){var promise=new Internal;this.promise=promise;this.resolve=_ctx($resolve,promise,1);this.reject=_ctx($reject,promise,1)};_newPromiseCapability.f=newPromiseCapability=function(C){return C===$Promise||C===Wrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)}}_export(_export.G+_export.W+_export.F*!USE_NATIVE,{Promise:$Promise});_setToStringTag($Promise,PROMISE);_setSpecies(PROMISE);Wrapper=_core[PROMISE];_export(_export.S+_export.F*!USE_NATIVE,PROMISE,{reject:function reject(r){var capability=newPromiseCapability(this);var $$reject=capability.reject;$$reject(r);return capability.promise}});_export(_export.S+_export.F*(_library||!USE_NATIVE),PROMISE,{resolve:function resolve(x){return _promiseResolve(_library&&this===Wrapper?$Promise:this,x)}});_export(_export.S+_export.F*!(USE_NATIVE&&_iterDetect(function(iter){$Promise.all(iter)["catch"](empty)})),PROMISE,{all:function all(iterable){var C=this;var capability=newPromiseCapability(C);var resolve=capability.resolve;var reject=capability.reject;var result=_perform(function(){var values=[];var index=0;var remaining=1;_forOf(iterable,false,function(promise){var $index=index++;var alreadyCalled=false;values.push(undefined);remaining++;C.resolve(promise).then(function(value){if(alreadyCalled)return;alreadyCalled=true;values[$index]=value;--remaining||resolve(values)},reject)});--remaining||resolve(values)});if(result.e)reject(result.v);return capability.promise},race:function race(iterable){var C=this;var capability=newPromiseCapability(C);var reject=capability.reject;var result=_perform(function(){_forOf(iterable,false,function(promise){C.resolve(promise).then(capability.resolve,reject)})});if(result.e)reject(result.v);return capability.promise}});function AwaitValue(value){this.value=value}function AsyncGenerator(gen){var front,back;function send(key,arg){return new Promise(function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null};if(back){back=back.next=request}else{front=back=request;resume(key,arg)}})}function resume(key,arg){try{var result=gen[key](arg);var value=result.value;if(value instanceof AwaitValue){Promise.resolve(value.value).then(function(arg){resume("next",arg)},function(arg){resume("throw",arg)})}else{settle(result.done?"return":"normal",result.value)}}catch(err){settle("throw",err)}}function settle(type,value){switch(type){case"return":front.resolve({value:value,done:true});break;case"throw":front.reject(value);break;default:front.resolve({value:value,done:false});break}front=front.next;if(front){resume(front.key,front.arg)}else{back=null}}this._invoke=send;if(typeof gen.return!=="function"){this.return=undefined}}if(typeof Symbol==="function"&&Symbol.asyncIterator){AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}}AsyncGenerator.prototype.next=function(arg){return this._invoke("next",arg)};AsyncGenerator.prototype.throw=function(arg){return this._invoke("throw",arg)};AsyncGenerator.prototype.return=function(arg){return this._invoke("return",arg)};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var classCallCheck=_classCallCheck;function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var createClass=_createClass;var apiBase="https://app.botamp.com/api/v1/";var api;var apiKey;var pageId;var promise;function apiUrl(resource,id,subResource){var url=apiBase+resource;if(id){url+="/"+id}if(subResource){url+="/"+subResource}return url}function setRequestHeaders(){api.setRequestHeader("Content-Type","application/vnd.api+json");api.setRequestHeader("Authorization","Basic "+btoa(apiKey+":"));api.withCredentials=true}function requestBody(resource,attributes){var body={data:{type:resource,attributes:attributes}};return JSON.stringify(body)}function contactIdKey(){return"botamp_"+pageId+"_contact_id"}function savedContactId(){return localStorage.getItem(contactIdKey())}function createContact(attributes){promise=promise.then(function(){api.open("POST",apiUrl("contacts"));api.onload=function(){if(api.status===201){localStorage.setItem(contactIdKey(),JSON.parse(api.responseText)["data"]["id"])}};setRequestHeaders();api.send(requestBody("contacts",attributes))})}function updateContact(id,attributes){promise=promise.then(function(){api.open("PUT",apiUrl("contacts",id));setRequestHeaders();api.send(requestBody("contacts",attributes))})}function redirectToTaggedHref(e){var href=e.target.getAttribute("href");if(!(e.target.tagName.toLowerCase()==="a"&&href.includes("m.me/"))){return}var savedId=savedContactId();if(!savedId){return}e.preventDefault();document.location.href=href+"?ref="+encodeURIComponent("botamp?btp_cid="+savedId)}var Botamp=function(){function Botamp(){classCallCheck(this,Botamp);var botamp=window.botamp||[];while(botamp.length){this.push(botamp.shift())}window.addEventListener("click",redirectToTaggedHref,false)}createClass(Botamp,[{key:"push",value:function push(param){if(this[param[0]]){this[param[0]].apply(this,param[1])}else{throw new Error("Function '".concat(param[0],"' does not exist.'"))}}},{key:"load",value:function load(publicApiKey){apiKey=publicApiKey;api=new XMLHttpRequest;promise=new Promise(function(resolve,reject){api.open("GET",apiUrl("me"),true);api.onload=function(){if(api.status===200){pageId=JSON.parse(api.responseText)["data"]["id"];var matchContactId=window.location.href.match(/btp_cid=(\d+)/);if(matchContactId){api.open("GET",apiUrl("contacts",matchContactId[1]),true);api.onload=function(){if(api.status===200){localStorage.setItem(contactIdKey(),matchContactId[1])}};setRequestHeaders();api.send()}resolve()}else{reject(api.responseText)}};api.onerror=function(){reject()};setRequestHeaders();api.send()});promise=promise.catch(function(error){if(error){console.log(error)}})}},{key:"identify",value:function identify(){if(arguments.length===1){var savedId=savedContactId();if(savedId){updateContact(savedId,arguments[0])}else{createContact(arguments[0])}}else if(arguments.length===2){updateContact(arguments[0],arguments[1])}}},{key:"track",value:function track(name,properties){promise=promise.then(function(){api.open("POST",apiUrl("contacts",savedContactId(),"events"));setRequestHeaders();api.send(requestBody("events",{name:name,properties:properties}))})}}]);return Botamp}();window.botamp=new Botamp})();